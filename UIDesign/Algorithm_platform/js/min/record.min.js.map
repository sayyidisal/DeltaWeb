{"version":3,"sources":["record.js"],"names":["replaceSelectionWithHtml","html","range","window","getSelection","getRangeAt","deleteContents","div","document","createElement","innerHTML","child","frag","createDocumentFragment","firstChild","appendChild","insertNode","selection","createRange","pasteHTML","setSelectionRange","input","selectionStart","selectionEnd","focus","createTextRange","collapse","moveEnd","moveStart","select","this","angular","module","directive","restrict","templateUrl","controller","$scope","links","home","other","login","$http","variables","classType","counter","removeVariable","index","i","length","splice","getElementById","remove","insertVariable","isHidden","push","type","val","$","removeClass","setTimeout","unbind","click","event","labelClass","parseInt","attr","a","eq","replace","b","parent","hasClass","find","hide","show","updateFormula","inputs","getElementsByTagName","value","variableType","editTitle","tagConfirm","tagsHtml","tags","split","trim","deleteLabel","on","text","$apply","addFormula","before","submit","doneVariables","generators","options","txt","editor","clone","len","replaceWith","recordData","TITLE","TAGS","PROBLEM","VARIABLE","GENERATOR","BODY","ANSWER","ORIGINAL_PROBLEM","OPTION","CODE","TYPE","console","log","jQuery","ready","tooltip"],"mappings":"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","file":"record.min.js","sourcesContent":["(function() {\n\n\tangular.module('platform-record', [])\n\n\t.directive('navBar', [function() {\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: \"nav.html\",\n\t\t\t// controlerAs:\"nav\", \n\t\t\tcontroller: ['$scope', function($scope) {\n\t\t\t\t//pass links throught json\n\t\t\t\t$scope.links = {\n\t\t\t\t\thome: \"index.html\",\n\t\t\t\t\tother: \"other.html\",\n\t\t\t\t\tlogin: \"login.html\",\n\t\t\t\t}\n\t\t\t}],\n\t\t};\n\t}])\n\n\t.controller('RecordCtrl', ['$http', '$scope', function($http, $scope) {\n\t\t$scope.variables = [];\n\t\t$scope.classType = [\"success\", \"primary\", \"warning\"];\n\t\t$scope.counter = 0;\n\n\t\t$scope.removeVariable = function(index) {\n\t\t\tfor (var i = 0; i < $scope.variables.length; i++) {\n\t\t\t\tif ($scope.variables[i].index == index) {\n\t\t\t\t\t$scope.variables.splice(i, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\tdocument.getElementById('variable-label' + index).remove();\n\t\t}\n\n\t\t$scope.insertVariable = function(isHidden) {\n\t\t\tdocument.getElementById('record-editor').focus();\n\t\t\t$scope.counter += 1;\n\t\t\tthis.variables.push({\n\t\t\t\ttype: 1,\n\t\t\t\tindex: $scope.counter,\n\t\t\t\tval: \"\",\n\t\t\t\tisHidden: isHidden\n\t\t\t})\n\t\t\tif (isHidden != 1) {\n\t\t\t\treplaceSelectionWithHtml(\"&nbsp;<span class='label label-success noselect' contenteditable='false' id='variable-label\" + $scope.counter + \"'>a\" + $scope.counter + \"</span>&nbsp;\");\n\t\t\t};\n\t\t\t//jquery involved\n\t\t\t$('.collapse').removeClass('in');\n\t\t\tsetTimeout(function() {\n\t\t\t\t$('[data-variable]').unbind('click').click(function(event) {\n\t\t\t\t\tvar labelClass = $scope.classType[parseInt($(this).attr('data-checked')) - 1];\n\t\t\t\t\t$('#variable-label' + $(this).attr('data-variable')).attr('class', 'label label-' + labelClass);\n\t\t\t\t\tindex = parseInt($(this).attr('data-variable'));\n\t\t\t\t\tvar a = $('#collapse' + index + \" input\").eq(3).val().replace(/\\s/g, \"\"),\n\t\t\t\t\t\tb = $('#collapse' + index + \" input\").eq(4).val().replace(/\\s/g, \"\");\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tif ($('#collapse' + index + \" input\").eq(2).parent().hasClass('active')) {\n\t\t\t\t\t\t\t$('#formula-line' + index).find('input').val('\"\"');\n\t\t\t\t\t\t\t$('.variable-range-container').hide();\n\t\t\t\t\t\t} else if (a != \"\" && b != \"\") {\n\t\t\t\t\t\t\t$('.variable-range-container').show();\n\t\t\t\t\t\t\tif ($('#collapse' + index + \" input\").eq(0).parent().hasClass('active')) {\n\t\t\t\t\t\t\t\t$('#formula-line' + index).find('input').val(\"RandomPackage.randomNum(\" + a + \",\" + b + \");\");\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t$('#formula-line' + index).find('input').val(\"RandomPackage.randomFloat(\" + a + \",\" + b + \");\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('.variable-range-container').show();\n\t\t\t\t\t\t\t$('#formula-line' + index).find('input').val(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 20);\n\t\t\t\t});\n\t\t\t}, 20);\n\t\t}\n\n\t\t$scope.updateFormula = function(index) {\n\t\t\tvar inputs = document.getElementById('collapse' + index).getElementsByTagName('input'),\n\t\t\t\ta = inputs[3].value.replace(/\\s/g, \"\"),\n\t\t\t\tb = inputs[4].value.replace(/\\s/g, \"\");\n\t\t\tif (a != \"\" && b != \"\") {\n\t\t\t\tvar variableType = inputs[0].value == \"1\" ? \"Num\" : \"Float\";\n\t\t\t\tdocument.getElementById('formula-line' + index).getElementsByTagName('input')[0].value = \"RandomPackage.random\" + variableType + \"(\" + a + \",\" + b + \");\";\n\t\t\t}else{\n\t\t\t\tdocument.getElementById('formula-line' + index).getElementsByTagName('input')[0].value = \"\"\n\t\t\t}\n\t\t}\n\n\t\t$scope.editTitle = function() {\n\t\t\tdocument.getElementById('record-title-edit').focus();\n\t\t}\n\n\t\t$scope.tagConfirm = function() {\n\t\t\ttagsHtml = \"\", tags = document.getElementById('tag-input').value.split(\";\");\n\t\t\tfor (var i = tags.length - 1; i >= 0; i--) {\n\t\t\t\tif (tags[i].trim() != \"\") {\n\t\t\t\t\ttagsHtml = '<a class=\"tag-link\" href=\"#' + tags[i].trim() + '\">' + tags[i].trim() + \"</a>\" + tagsHtml;\n\t\t\t\t};\n\t\t\t};\n\t\t\tdocument.getElementById('tag-container').innerHTML = tagsHtml;\n\t\t}\n\n\t\t$scope.deleteLabel = function() {\n\t\t\t//jquery involved\n\t\t\t$(\"#record-editor\").on(\"input\", function() {\n\t\t\t\tfor (var i = 0; i < $('[data-panel-variable]').length; i++) {\n\t\t\t\t\tif ($('#variable-label' + $('[data-panel-variable]').eq(i).attr('data-panel-variable')).text() != \"\") {} else {\n\t\t\t\t\t\t$scope.variables.splice(i, 1);\n\t\t\t\t\t\t$scope.$apply();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\t$scope.deleteLabel();\n\n\t\t$scope.addFormula = function() {\n\t\t\t$('#add-formula').parent().before('<li><span></span><input type=\"text\"></li>');\n\t\t}\n\n\t\t// $scope.addFormula2 = function () {\t\t\n\t\t// \t$('#add-formula2').parent().before('<li><span></span><input type=\"text\"></li>');\t\t\n\t\t// }\n\n\t\t$scope.submit = function() {\n\t\t\tvar doneVariables = [],\n\t\t\t\tgenerators = [],\n\t\t\t\toptions = [],\n\t\t\t\ttxt = '',\n\t\t\t\teditor = $('#record-editor').clone(),\n\t\t\t\tlen = editor.find('span.label').length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\ttxt = \"$\" + editor.find('span.label').eq(0).text() + \"$\";\n\t\t\t\teditor.find('span.label').eq(0).replaceWith(txt);\n\t\t\t};\n\t\t\tfor (var i = 0; i < $scope.variables.length; i++) {\n\t\t\t\tdoneVariables.push(($scope.variables[i].type == 1 ? \"integer\" : \"floating\") + \" a\" + $scope.variables[i].index)\n\t\t\t};\n\t\t\tfor (var i = 0; i < $('#formula-container1 li').length - 1; i++) {\n\t\t\t\tgenerators.push($('#formula-container1 li').eq(i).find('input').val());\n\t\t\t};\n\t\t\tfor (var i = 0; i < $('#optionModal input').length; i++) {\n\t\t\t\toptions.push($('#optionModal input').eq(i).val());\n\t\t\t};\n\t\t\tvar recordData = {\n\t\t\t\t\"TITLE\": $('#record-title-edit').text(),\n\t\t\t\t\"TAGS\": $('#tag-input').val().split(\";\"),\n\t\t\t\t\"PROBLEM\": {\n\t\t\t\t\t\"VARIABLE\": doneVariables,\n\t\t\t\t\t\"GENERATOR\": generators,\n\t\t\t\t\t\"BODY\": editor.html().replace(/&nbsp;/g, ''),\n\t\t\t\t\t\"ANSWER\": $('#answer-textarea').val()\n\t\t\t\t},\n\t\t\t\t\"ORIGINAL_PROBLEM\": $('#origin-textarea').val(),\n\t\t\t\t\"OPTION\": options,\n\t\t\t\t\"CODE\": $('#codeModal textarea').val(),\n\t\t\t\t\"TYPE\": 1\n\t\t\t};\n\t\t\tconsole.log(recordData);\n\t\t\t// $http({\n\t\t\t// \t\tmethod: 'POST',\n\t\t\t// \t\turl: 'recordProcess', // to be changed\n\t\t\t// \t\tdata: $.param(recordData), // pass in data as strings\n\t\t\t// \t\theaders: {\n\t\t\t// \t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t// \t\t} // set the headers so angular passing info as form data (not request payload)\n\t\t\t// \t})\n\t\t\t// \t.success(function(data) {\n\n\t\t\t// \t\t// dosomething with the data?\n\n\t\t\t// \t});\n\t\t}\n\n\t}]);\n\n})()\n\n// utility functions\njQuery(document).ready(function($) {\n\t$('[data-toggle=\"tooltip\"]').tooltip();\n});\n\nfunction replaceSelectionWithHtml(html) {\n\tvar range, html;\n\tif (window.getSelection && window.getSelection().getRangeAt) {\n\t\trange = window.getSelection().getRangeAt(0);\n\t\trange.deleteContents();\n\t\tvar div = document.createElement(\"div\");\n\t\tdiv.innerHTML = html;\n\t\tvar frag = document.createDocumentFragment(),\n\t\t\tchild;\n\t\twhile ((child = div.firstChild)) {\n\t\t\tfrag.appendChild(child);\n\t\t}\n\t\trange.insertNode(frag);\n\t} else if (document.selection && document.selection.createRange) {\n\t\trange = document.selection.createRange();\n\t\trange.pasteHTML(html);\n\t}\n}\n\nfunction setSelectionRange(input, selectionStart, selectionEnd) {\n\tif (input.setSelectionRange) {\n\t\tinput.focus();\n\t\tinput.setSelectionRange(selectionStart, selectionEnd);\n\t} else if (input.createTextRange) {\n\t\tvar range = input.createTextRange();\n\t\trange.collapse(true);\n\t\trange.moveEnd('character', selectionEnd);\n\t\trange.moveStart('character', selectionStart);\n\t\trange.select();\n\t} else if ('selectionStart' in this) {\n\t\tthis.selectionStart = selectionStart;\n\t\tthis.selectionEnd = selectionEnd;\n\t}\n}"],"sourceRoot":"/source/"}