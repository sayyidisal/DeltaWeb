function replaceSelectionWithHtml(e){var t,e;if(window.getSelection&&window.getSelection().getRangeAt){t=window.getSelection().getRangeAt(0),t.deleteContents();var a=document.createElement("div");a.innerHTML=e;for(var n,l=document.createDocumentFragment();n=a.firstChild;)l.appendChild(n);t.insertNode(l)}else document.selection&&document.selection.createRange&&(t=document.selection.createRange(),t.pasteHTML(e))}function setSelectionRange(e,t,a){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,a);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",a),n.moveStart("character",t),n.select()}else"selectionStart"in this&&(this.selectionStart=t,this.selectionEnd=a)}!function(){angular.module("platform-record",[]).directive("navBar",[function(){return{restrict:"E",templateUrl:"nav.html",controller:["$scope",function(e){e.links={home:"index.html",other:"other.html",login:"login.html"}}]}}]).controller("RecordCtrl",["$http","$scope",function(e,t){t.variables=[],t.classType=["success","primary","warning"],t.counter=0,t.removeVariable=function(e){for(var a=0;a<t.variables.length;a++)t.variables[a].index==e&&t.variables.splice(a,1);document.getElementById("variable-label"+e).remove()},t.insertVariable=function(e){document.getElementById("record-editor").focus(),t.counter+=1,this.variables.push({type:1,index:t.counter,val:"",isHidden:e}),1!=e&&replaceSelectionWithHtml("&nbsp;<span class='label label-success noselect' contenteditable='false' id='variable-label"+t.counter+"'>a"+t.counter+"</span>&nbsp;"),$(".collapse").removeClass("in"),setTimeout(function(){$("[data-variable]").unbind("click").click(function(e){var a=t.classType[parseInt($(this).attr("data-checked"))-1];$("#variable-label"+$(this).attr("data-variable")).attr("class","label label-"+a),index=parseInt($(this).attr("data-variable"));var n=$("#collapse"+index+" input").eq(2).val().replace(/\s/g,""),l=$("#collapse"+index+" input").eq(3).val().replace(/\s/g,"");setTimeout(function(){""!=n&&""!=l&&($("#collapse"+index+" input").eq(0).parent().hasClass("active")?$("#formula-line"+index).find("input").val("RandomPackage.randomNum("+n+","+l+");"):$("#formula-line"+index).find("input").val("RandomPackage.randomFloat("+n+","+l+");"))},20)})},20)},t.updateFormula=function(e){var t=document.getElementById("collapse"+e).getElementsByTagName("input"),a=t[2].value.replace(/\s/g,""),n=t[3].value.replace(/\s/g,"");if(""!=a&&""!=n){var l="1"==t[0].value?"Num":"Float";document.getElementById("formula-line"+e).getElementsByTagName("input")[0].value="RandomPackage.random"+l+"("+a+","+n+");"}},t.editTitle=function(){document.getElementById("record-title-edit").focus()},t.tagConfirm=function(){tagsHtml="",tags=document.getElementById("tag-input").value.split(";");for(var e=tags.length-1;e>=0;e--)""!=tags[e].trim()&&(tagsHtml='<a class="tag-link" href="#'+tags[e].trim()+'">'+tags[e].trim()+"</a>"+tagsHtml);document.getElementById("tag-container").innerHTML=tagsHtml},t.deleteLabel=function(){$("#record-editor").on("input",function(){for(var e=0;e<$("[data-panel-variable]").length;e++)""!=$("#variable-label"+$("[data-panel-variable]").eq(e).attr("data-panel-variable")).text()||(t.variables.splice(e,1),t.$apply())})},t.deleteLabel(),t.addFormula=function(){$("#add-formula").parent().before('<li><span></span><input type="text"></li>')},t.submit=function(){for(var e=[],a=[],n=[],l="",i=$("#record-editor").clone(),r=i.find("span.label").length,o=0;r>o;o++)l="$"+i.find("span.label").eq(0).text()+"$",i.find("span.label").eq(0).replaceWith(l);for(var o=0;o<t.variables.length;o++)e.push((1==t.variables[o].type?"integer":"floating")+" a"+t.variables[o].index);for(var o=0;o<$("#formula-container1 li").length-1;o++)a.push($("#formula-container1 li").eq(o).find("input").val());for(var o=0;o<$("#optionModal input").length;o++)n.push($("#optionModal input").eq(o).val());var c={TITLE:$("#record-title-edit").text(),TAGS:$("#tag-input").val().split(";"),PROBLEM:{VARIABLE:e,GENERATOR:a,BODY:i.html().replace(/&nbsp;/g,""),ANSWER:$("#answer-textarea").val()},ORIGINAL_PROBLEM:$("#origin-textarea").val(),OPTION:n,CODE:$("#codeModal textarea").val(),TYPE:1};console.log(c)}}])}(),jQuery(document).ready(function(e){e('[data-toggle="tooltip"]').tooltip()});
//# sourceMappingURL=record.min.js.map
