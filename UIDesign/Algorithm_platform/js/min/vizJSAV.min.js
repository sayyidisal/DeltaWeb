function vizJSAV(r,e){jsonContent=e,container=$("#"+r)}function findObj(r,e,a){var t,o=a.match(/\d+/)[0];if(isNaN(o))return-1;for(var l=o;l>0;l--)if(t="depth_"+l,e in jsavObjDict[t]&&(e==r&&l!=o||e!=r)){if(null==jsavObjDict[t][e][0])continue;return l}return-1}function strToArray(r){var e=[];if("["!=r[0]||"]"!=r.slice(-1))return null;for(var a=1;a<r.length-1;a++)switch(r[a]){case"[":var t=["["],o="[";for(a++;0!=t.length;){if(a>=r.length-1)return null;"["==r[a]?t.push(t):"]"==r[a]&&t.pop(),o+=r[a++]}e.push(strToArray(o)),a--;break;case"]":return null;default:for(var o="";"["!=r[a]&&"]"!=r[a]&&","!=r[a]&&a<r.length-1;)o+=r[a++];e.push(o.trim()),","!=r[a]&&a--}return e}function strToDict(r){r=r.replace(/\'/g,'"')}function labelPointer(r,e){var a=av.pointer(r,e);return a}var jsonContent={},currentStat,glbFlags={u:0,n:1,c:2},indexColor="rgb(255, 163, 163)",nColor="rgb(217, 255, 178)",cColor="rgb(255, 255, 162)",bColor="red",edgeColor="rgb(255, 102, 255)",matrixHeaderColor="rgb(152,152,152)",uColor="white",graphColor={RED:"rgb(217, 137, 137)",BLUE:"rgb(138, 138, 230)",GRAY:"rgb(204, 204, 204)",WHITE:"rgb(255, 255, 255)",YELLOW:"rgb(255, 255, 153)",GREEN:"rgb(162, 243, 162)",BLACK:"rgb(0, 0, 0)"},DATATYPES=["Idict","Ilist","Stack","Queue","LinkedList","Matrix","StringMatrix","set","tuple","Graph","DiGraph","BinarySearchTree","AVLTree","RBTree","BinaryMinHeap","MinPriorityQueue","DisjointSet","int","str","bool","float","NoneType"],OBJTYPES=["Idict","Ilist","Stack","Queue","LinkedList","Matrix","StringMatrix","set","tuple","Graph","DiGraph","BinarySearchTree","AVLTree","RBTree","BinaryMinHeap","MinPriorityQueue","DisjointSet"],av,jsavObjDict={},current_content,current_line,glbpointerList=[],glbpointerParamList=[],avDepthDict={},divDepthList=[],container;vizJSAV.prototype.animate=function(r){var e="statement_"+r;if(currentStat=e,e in jsonContent){var a=jsonContent[e].vars;current_content=jsonContent[e].current_content,current_line=jsonContent[e].current_line,glbpointerParamList=[];for(var t=0;t<glbpointerList.length;t++)glbpointerList[t].hide();glbpointerList=[];var o={};for(var l in a){for(var n=[],i=a[l],t=0;t<i.length;t++){var s=i[t].name;i[t].type;n.push(s)}o[l]=n}for(var l in jsavObjDict)for(var c in jsavObjDict[l])if(l in o){if(-1==o[l].indexOf(c)){for(var t=0;t<jsavObjDict[l][c].length;t++)null!=jsavObjDict[l][c][t]&&jsavObjDict[l][c][t].hide();delete jsavObjDict[l][c]}}else{for(var t=0;t<jsavObjDict[l][c].length;t++)null!=jsavObjDict[l][c][t]&&jsavObjDict[l][c][t].hide();delete jsavObjDict[l][c]}var g=divDepthList.length,d=Object.keys(a).length;if(g>d){for(var t=d;g>t;t++)delete avDepthDict["depth_"+(t+1)],divDepthList[t].remove();divDepthList.splice(d,g-d)}if(d>g)for(var t=g;d>t;t++){var u=$("<div id='layer"+(t+1)+"' class='graphlayer'><span>layer for function call depth: "+(t+1)+"</span></div>");container.append(u);var p=new JSAV(u);avDepthDict["depth_"+(t+1)]=p,divDepthList[t]=u}var h=container.width();padding=10,singleLayerWidth=(h-2*padding*d)/d,$(".graphlayer").css("width",singleLayerWidth),$(".graphlayer").css("padding-left",padding),$(".graphlayer").css("padding-right",padding);for(var l in a){l in jsavObjDict||(jsavObjDict[l]={});for(var i=a[l],v=0;v<i.length;v++){var b=i[v];if(null!=b){var s=b.name;b.pointer;av=avDepthDict[l];var f=this.plotVar(b,l);jsavObjDict[l][s]=f}}}for(var t=0;t<glbpointerParamList.length;t++)if("myObjPointer"==glbpointerParamList[t][3]){var k=glbpointerParamList[t][2].index,C=glbpointerParamList[t][2].depth,y=glbpointerParamList[t][1].text();y+=" <- "+C+":"+glbpointerParamList[t][0],null!=k&&0!=k.length&&(y+=", index: "+k),glbpointerParamList[t][1].text(y)}else{var m=avDepthDict[glbpointerParamList[t][4]].pointer(glbpointerParamList[t][0],glbpointerParamList[t][1],glbpointerParamList[t][2]);m.addClass(glbpointerParamList[t][3]),glbpointerList.push(m)}}},vizJSAV.prototype.addPointer=function(r,e){var a=r.pointer,t=r.name,o=a[0],l=a[1],n=findObj(t,o,e);if(-1!=n){if(0==jsavObjDict["depth_"+n][o].length)return null;for(var i,s=jsavObjDict["depth_"+n][o][0],c=jsavObjDict["depth_"+n][o][1],g=jsonContent[currentStat].vars["depth_"+n],d=0;d<g.length;d++){var u=g[d];u.name==o&&(i=u)}if(r.varFlag!=glbFlags.u){null!=s&&s.hide(),null!=c&&c.hide(),null!=l&&0!=l.length&&(i.index=l),null!=r.index&&0!=r.index.length&&(i.index=r.index);var p=av;av=avDepthDict["depth_"+n],jsavObjDict["depth_"+n][o]=this.plotVar(i,"depth_"+n),av=p,s=jsavObjDict["depth_"+n][o][0],c=jsavObjDict["depth_"+n][o][1];for(var h=0;h<glbpointerParamList.length;h++)glbpointerParamList[h][4]=="depth_"+n&&glbpointerParamList[h][5]==o&&("myObjPointer"==glbpointerParamList[h][3]?glbpointerParamList[h][1]=c:(glbpointerParamList[h][1]=s,glbpointerParamList[h][2].anchor="right top"))}else null!=l&&0!=l.length&&(i.index=l),null!=r.index&&0!=r.index.length&&(i.index=r.index),this.refreshFlag(i,"depth_"+n);var v,b=parseInt(l),f={};"Idict"==i.type||"dict"==i.type;var k=["Ilist","list","Stack","Queue","set","tuple"];return isNaN(b)||-1==k.indexOf(i.type)?(-1==k.indexOf(i.type)&&(o+="["+b+"]"),f={depth:e,index:l},v="myObjPointer",glbpointerParamList.push([r.name,c,f,v,"depth_"+n,o])):(f={targetIndex:b,anchor:"left top",myAnchor:"center bottom"},v="myIndexPointer",glbpointerParamList.push([r.name,s,f,v,"depth_"+n,o])),null}return null},vizJSAV.prototype.setCSSByClass=function(r,e){for(var a=document.getElementsByClassName(r),t=0;t<a.length;t++)a[t].css(e)},vizJSAV.prototype.arrayHighlight=function(r,e){r.highlight(e)},vizJSAV.prototype.arrayUnhighlight=function(r,e){r.unhighlight(e)},vizJSAV.prototype.linkedListHighlight=function(r,e){r.get(e).highlight()},vizJSAV.prototype.linkedListUnhighlight=function(r,e){r.get(e).unhighlight()},vizJSAV.prototype.refreshFlag=function(r,e){var a,t=r.name,o=r.type,l=r.varFlag,n=r.pointer;if(null!=jsavObjDict[e][t]&&0!=jsavObjDict[e][t].length&&(a=jsavObjDict[e][t][0],null==n||0==n.length))switch(o){case"int":case"str":case"bool":case"float":case"NoneType":a.hide(),varValue=r.value;var i=o+"("+t.trim()+"): "+varValue;a=av.code(i,{lineNumbers:!1}),l==glbFlags.c?a.css(0,{"background-color":cColor}):l==glbFlags.n?a.css(0,{"background-color":nColor}):a.css(0,{"background-color":uColor}),a.addClass("primitive"),jsavObjDict[e][t][0]=a;break;case"Idict":case"dict":this.clearDictFlags(a,r);break;case"Ilist":case"list":case"set":case"tuple":case"Stack":case"Queue":this.clearListFlags(a,r);break;case"LinkedList":this.clearLinkedListFlags(a,r);break;case"Matrix":this.clearMatrixFlags(a,r);break;case"StringMatrix":this.clearStringMatrixFlags(a,r);break;case"Graph":case"DiGraph":break;case"RBTree":break;case"BinarySearchTree":case"AVLTree":this.clearBTreeFlags(a,r);break;case"BinaryMinHeap":case"MinPriorityQueue":this.clearHeapFlags(a,r);break;case"DisjointSet":this.clearDisjoinSetFlags(a,r);break;case"None":break;default:a.hide(),varValue=r.value;var n=r.pointer;if(null!=n&&n.length>0)a=this.addPointer(r,e);else{var i;i=null!=o?o+"("+t.trim()+"): "+varValue:t.trim()+": "+varValue,a=av.code(i,{lineNumbers:!1}),l==glbFlags.c?a.css(0,{"background-color":cColor}):l==glbFlags.n?a.css(0,{"background-color":nColor}):a.css(0,{"background-color":uColor}),a.addClass("Others")}jsavObjDict[e][t][0]=a}},vizJSAV.prototype.plotVar=function(r,e){var a,t,o,l=r.type,n=r.name,i=r.varFlag,s=jsavObjDict[e][n];if(null!=s)for(var c=0;c<s.length;c++)null!=s[c]&&s[c].hide();switch(l){case"int":case"str":case"bool":case"float":case"NoneType":a=r.value;var g=l+"("+n.trim()+"): "+a;t=av.code(g,{lineNumbers:!1}),i==glbFlags.c?t.css(0,{"background-color":cColor}):i==glbFlags.n&&t.css(0,{"background-color":nColor}),t.addClass("primitive");break;case"Idict":case"dict":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseDict(r),t.addClass("Idict"));break;case"Ilist":case"Array":case"set":case"tuple":var d=r.pointer;"None"!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseList(r,{}),t.addClass("Ilist"));break;case"Stack":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseList(r,{layout:"vertical",indexed:!0}),t.addClass("Stack"));break;case"Queue":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseList(r,{indexed:!0}),t.addClass("Queue"));break;case"LinkedList":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseLinkedList(r),t.addClass("LinkedList"));break;case"Matrix":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseMatrix(r),t.addClass("Matrix"));break;case"StringMatrix":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseStringMatrix(r),t.addClass("StringMatrix"));break;case"Graph":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseGraph(r,{layout:"layered"}),t.addClass("Graph"));break;case"DiGraph":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseGraph(r,{directed:!0,layout:"layered"}),t.addClass("DiGraph"));break;case"BinarySearchTree":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseBTree(r,"BinarySearchTree"),t.addClass("BinarySearchTree"));break;case"AVLTree":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseBTree(r,"AVLTree"),t.addClass("AVLTree"));break;case"RBTree":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseBTree(r,"RBTree"),t.addClass("RBTree"));break;case"BinaryMinHeap":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseHeap(r),t.addClass("BinaryMinHeap"));break;case"MinPriorityQueue":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseHeap(r),t.addClass("MinPriorityQueue"));break;case"DisjointSet":var d=r.pointer;null!=d&&d.length>0?t=this.addPointer(r,e):(o=av.label(r.name),t=this.parseDisjointSet(r),t.addClass("DisjointSet"));break;case"None":break;default:a=r.value;var d=r.pointer;if(null!=d&&d.length>0)t=this.addPointer(r,e);else{var g;g=null!=l?l+"("+n.trim()+"): "+a:n.trim()+": "+a,t=av.code(g,{lineNumbers:!1}),i==glbFlags.c?t.css(0,{"background-color":cColor}):i==glbFlags.n?t.css(0,{"background-color":nColor}):t.css(0,{"background-color":uColor}),t.addClass("Others")}}return[t,o]},vizJSAV.prototype.clearListFlags=function(r,e){var a=e.flags,t=e.index;if(null!=a)for(var o=0;o<a.length;o++)a[o]==glbFlags.c?r.css(o,{"background-color":cColor}):a[o]==glbFlags.n?r.css(o,{"background-color":nColor}):r.css(o,{"background-color":uColor});if(null!=t&&0!=t.length){var l=parseInt(t[0]);r.css(l,{"background-color":indexColor})}},vizJSAV.prototype.parseList=function(r,e){var a=r.value,t=r.index,o=r.flags,l=av.ds.array(a,e);if(null!=o)for(var n=0;n<o.length;n++)o[n]==glbFlags.c?l.css(n,{"background-color":cColor}):o[n]==glbFlags.n&&l.css(n,{"background-color":nColor});if(null!=t&&0!=t.length){var i=parseInt(t[0]);l.css(i,{"background-color":indexColor})}return l.mouseenter(l.highlight).mouseleave(l.unhighlight),l},vizJSAV.prototype.clearMatrixFlags=function(r,e){},vizJSAV.prototype.parseMatrix=function(r){var e=(r.name,r.value),a=av.ds.matrix(e,{style:"matrix"});return a.layout(),a},vizJSAV.prototype.clearStringMatrixFlags=function(r,e){for(var a=e.flags,t=e.topheader,o=e.leftheader,l=(e.index,0!=t.length||0!=o.length),n=0;n<a.length;n++)for(var i=0;i<a[n].length;i++)a[n][i]==glbFlags.c?l?r.css(n+1,i+1,{"background-color":cColor}):r.css(n,i,{"background-color":cColor}):a[n][i]==glbFlags.n?l?r.css(n+1,i+1,{"background-color":nColor}):r.css(n,i,{"background-color":nColor}):l?r.css(n+1,i+1,{"background-color":uColor}):r.css(n,i,{"background-color":uColor})},vizJSAV.prototype.parseStringMatrix=function(r){var e=r.value,a=r.flags,t=r.edges,o=$.extend(!0,{},r.topheader),l=$.extend(!0,{},r.leftheader),n=(r.index,$.map(o,function(r,e){return[r]})),i=$.map(l,function(r,e){return[r]}),s=0!=n.length||0!=i.length,c=$.extend(!0,{},e),g=$.map(c,function(r,e){return[r]});if(s){for(var d=n.length;d<g[0].length;d++)n.splice(0,0,"");for(var d=i.length;d<g.length;d++)i.splice(0,0,"");g.splice(0,0,n),g[0].splice(0,0,"");for(var d=1;d<g.length;d++)g[d].splice(0,0,i[d-1])}var u=av.ds.matrix(g,{style:"plain"});if(s){for(var d=1;d<g[0].length;d++)u.css(0,d,{"background-color":matrixHeaderColor});for(var d=1;d<g.length;d++)u.css(d,0,{"background-color":matrixHeaderColor})}for(var d=0;d<a.length;d++)for(var p=0;p<a[d].length;p++)a[d][p]==glbFlags.c?s?u.css(d+1,p+1,{"background-color":cColor}):u.css(d,p,{"background-color":cColor}):a[d][p]==glbFlags.n&&(s?u.css(d+1,p+1,{"background-color":nColor}):u.css(d,p,{"background-color":nColor}));for(var d=0;d<t.length;d++){var h=parseInt(t[d][0]),v=parseInt(t[d][1]),b=parseInt(t[d][2]),f=parseInt(t[d][3]),k={};h<a.length&&v<a[h].length&&b<a.length&&f<a[b].length&&(a[h][v]==glbFlags.c||a[b][f]==glbFlags.c)&&(k=$.extend({stroke:edgeColor})),s&&(h++,v++,b++,f++),u.addEdge(h,v,b,f,k)}return u.layout(),u},vizJSAV.prototype.clearDictFlags=function(r,e){var a,t=e.flags,o=e.index;null!=o&&0!=o.length&&(a=o[0]);var l=1;for(var n in t)t[n]==glbFlags.c?(r.css(0,l,{"background-color":cColor}),r.css(1,l,{"background-color":cColor})):t[n]==glbFlags.n?(r.css(0,l,{"background-color":nColor}),r.css(1,l,{"background-color":nColor})):(r.css(0,l,{"background-color":uColor}),r.css(1,l,{"background-color":uColor})),n==a&&(r.css(0,l,{"background-color":indexColor}),r.css(1,l,{"background-color":indexColor})),l++},vizJSAV.prototype.parseDict=function(r){var e=r.value,a=r.flags,t=r.index,o=-1,l=(e.length,new Array),n=new Array("Key"),i=new Array("Val"),s=1;for(var c in e)n.push(c),i.push(e[c]),null!=t&&0!=t.length&&t[0]==c&&(o=s),s++;l.push(n),l.push(i);var g=av.ds.matrix(l);s=1;for(var c in a)a[c]==glbFlags.c?(g.css(0,s,{"background-color":cColor}),g.css(1,s,{"background-color":cColor})):a[c]==glbFlags.n&&(g.css(0,s,{"background-color":nColor}),g.css(1,s,{"background-color":nColor})),s++;return-1!=o&&(g.css(0,o,{"background-color":indexColor}),g.css(1,o,{"background-color":indexColor})),g},vizJSAV.prototype.clearLinkedListFlags=function(r,e){for(var a=e.flags,t=e.index,o=0;o<a.length;o++)a[o]==glbFlags.c?r.get(o).css({"background-color":cColor}):a[o]==glbFlags.n?r.get(o).css({"background-color":nColor}):r.get(o).css({"background-color":uColor});if(null!=t&&0!=t.length){var l=parseInt(t[0]);r.get(l).css({"background-color":indexColor})}},vizJSAV.prototype.parseLinkedList=function(r){for(var e=r.flags,a=r.index,t=r.value,o=(r.name,av.ds.list()),l=0;l<t.length;l++)o.addLast(t[l]),e[l]==glbFlags.c?o.get(l).css({"background-color":cColor}):e[l]==glbFlags.n&&o.get(l).css({"background-color":nColor});if(null!=a&&0!=a.length){var n=parseInt(a[0]);o.get(n).css({"background-color":indexColor})}return o.layout(),o},vizJSAV.prototype.parseGraph=function(r,e){for(var a=r.V,t=r.E,o=av.ds.graph(e),l={},n=0;n<a.length;n++){var i=a[n].value,s=a[n].color.toUpperCase(),c=o.addNode(i);c.css({"background-color":graphColor[s]}),l[i]=c}for(var n=0;n<t.length;n++){var g=t[n].start,d=t[n].end,s=t[n].color,u=t[n].weight;o.addEdge(l[g],l[d],{weight:u,stroke:s})}return o.layout(),o},vizJSAV.prototype.clearBTreeFlags=function(r,e){var a=r.root();this.clearBTreeNodeColor(a)},vizJSAV.prototype.clearBTreeNodeColor=function(r){r.css({"background-color":uColor}),r.left()&&this.clearBTreeNodeColor(r.left()),r.right()&&this.clearBTreeNodeColor(r.right())},vizJSAV.prototype.parseBTree=function(r,e){var a,t=av.ds.binarytree(),o=(r.index,r.flags),l=r.value,n=r.color;"RBTree"==e&&(a=n.replace(/\[/g," ").replace(/\]/g," ").match(/\S+/g));for(var i,s,c=o.replace(/\[/g," ").replace(/\]/g," ").match(/\S+/g),g=[],d=[],u="",p=l,h=0,v=0;v<p.length;v++)switch(p[v]){case"[":g.push(p[v]);break;case"]":if(g.pop(),0==g.length)i=d.pop(),t.root(i);else{if(i=d.pop(),null==i)continue;s=d.length-1,parseInt(i.value())<parseInt(d[s].value())?d[s].left(i):d[s].right(i)}break;default:for(;"["!=p[v]&&"]"!=p[v]&&v<p.length;)u+=p[v],v+=1;u=u.trim().replace(/\'/g,"").replace(/\"/g,""),"None"!=u?(i=t.newNode(u),c[h]>=3&&(i.css({"border-color":bColor,"border-width":"2px"}),c[h]-=3),"RBTree"==e?"R"==a[h]?i.css({"background-color":graphColor.RED}):"B"==a[h]&&i.css({color:"white","background-color":"BLACK"}):c[h]==glbFlags.n?i.css({"background-color":nColor}):c[h]==glbFlags.c&&i.css({"background-color":cColor}),d.push(i)):d.push(null),h++,u="",v-=1}return t.layout(),t},vizJSAV.prototype.clearHeapFlags=function(r,e){},vizJSAV.prototype.parseHeap=function(r){for(var e=av.ds.binarytree(),a=(r.index,r.flags),t=r.value,o=[],l=0;l<t.length;l++){var n=e.newNode(t[l]);if(a[l]==glbFlags.n?n.css({"background-color":nColor}):a[l]==glbFlags.c&&n.css({"background-color":cColor}),o.push(n),0==l)e.root(n);else{var i=parseInt((l-1)/2);l%2==0?o[i].right(n):o[i].left(n)}}return e.layout(),e},vizJSAV.prototype.clearDisjoinSetFlags=function(r,e){},vizJSAV.prototype.parseDisjointSet=function(r){var e=av.ds.tree(),a=(r.index,r.value),t=r.flags,o={},l=e.root();l.hide({recursive:!1});for(var n in a){var i=a[n];if(!(n in o)){var s=e.newNode(n);t[n]==glbFlags.n?s.css({"background-color":nColor}):t[n]==glbFlags.c&&s.css({"background-color":cColor}),o[n]=s}if(!(i in o)){var s=e.newNode(i);t[i]==glbFlags.n?s.css({"background-color":nColor}):t[i]==glbFlags.c&&s.css({"background-color":cColor}),o[i]=s}n==i?(l.addChild(o[n]),o[n].edgeToParent().hide()):o[i].addChild(o[n])}return e.layout(),e};
//# sourceMappingURL=vizJSAV.min.js.map
