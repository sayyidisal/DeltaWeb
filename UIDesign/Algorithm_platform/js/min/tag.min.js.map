{"version":3,"sources":["tag.js"],"names":["angular","module","directive","restrict","templateUrl","controller","$scope","links","home","other","login","$http","paths","location","pathname","split","data","isNew","canEdit","tag","length","abstract","intro","startEdit","isActive","editText","saveText","isSaved","enableEdit","Minislate","simpleEditor","document","getElementById","save","innerHTML","trim","alert","tagInfo","url","window","href","nowPath","newUrl","replace","history","pushState","d","Date","getHours","getMinutes","filter","$sce","trustAsHtml"],"mappings":"CAAA,WAECA,QAAQC,OAAO,oBAEdC,UAAU,UAAW,WACrB,OACCC,SAAU,IACVC,YAAa,WAEbC,YAAa,SAAU,SAASC,GAE/BA,EAAOC,OACNC,KAAM,aACNC,MAAO,aACPC,MAAO,oBAMVL,WAAW,eAAgB,QAAS,SAAU,SAASM,EAAOL,GAE9D,GAAIM,GAAQC,SAASC,SAASC,MAAM,IAEpCT,GAAOU,MACNC,OAAO,EACPC,SAAS,EACTC,IAAKP,EAAMA,EAAMQ,OAAS,GAC1BC,WAAU,eACVC,MAAO,oBAURhB,EAAOiB,WAAY,EAEnBjB,EAAOkB,UAAW,EAElBlB,EAAOmB,SAAW,OAElBnB,EAAOoB,SAAW,OAElBpB,EAAOqB,SAAU,EAEjBrB,EAAOsB,WAAa,WACnB,IAAKtB,EAAOiB,UAAW,CACtBjB,EAAOkB,UAAW,EAClBlB,EAAOiB,WAAY,EACnBjB,EAAOmB,SAAW,SACL,IAAII,WAAUC,aAAaC,SAASC,eAAe,gBAIlE1B,EAAO2B,KAAO,WACb,GAA4D,OAAxDF,SAASC,eAAe,YAAYE,UAAUC,OAEjD,MADAC,OAAM,2CACC,IAGR9B,GAAOqB,SAAU,CAEjB,IAAIU,IACHlB,IAAKb,EAAOU,KAAKC,MAAQc,SAASC,eAAe,YAAYE,UAAY5B,EAAOU,KAAKG,IACrFE,WAAUU,SAASC,eAAe,gBAAgBE,UAClDZ,MAAOS,SAASC,eAAe,aAAaE,WAIzCI,EAAMC,OAAO1B,SAAS2B,KACzBC,EAAUH,EAAIvB,MAAM,KACpB2B,EAASJ,EAAIK,QAAQF,EAAQA,EAAQrB,OAAS,GAAIiB,EAAQlB,IAC3DyB,SAAQC,UAAU,GAAIR,EAAQlB,IAAKuB,EACnC,IAAII,GAAI,GAAIC,KACZzC,GAAOoB,SAAW,YAAcoB,EAAEE,WAAa,KAAOF,EAAEG,aAAe,GAAK,IAAM,IAAMH,EAAEG,iBAgC3FC,OAAO,SAAU,SAASC,GAC1B,MAAOA,GAAKC","file":"tag.min.js","sourcesContent":["(function() {\n\n\tangular.module('platform-list', [])\n\n\t.directive('navBar', [function() {\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: \"nav.html\",\n\t\t\t// controlerAs:\"nav\", \n\t\t\tcontroller: ['$scope', function($scope) {\n\t\t\t\t//pass links throught json\n\t\t\t\t$scope.links = {\n\t\t\t\t\thome: \"index.html\",\n\t\t\t\t\tother: \"other.html\",\n\t\t\t\t\tlogin: \"login.html\",\n\t\t\t\t}\n\t\t\t}],\n\t\t};\n\t}])\n\n\t.controller('TaginfoCtrl', ['$http', '$scope', function($http, $scope) {\n\n\t\tvar paths = location.pathname.split('/');\n\n\t\t$scope.data = {\n\t\t\tisNew: false,\n\t\t\tcanEdit: true,\n\t\t\ttag: paths[paths.length - 1],\n\t\t\tabstract: \"add abstract\",\n\t\t\tintro: \"add introduction\"\n\t\t};\n\n\t\t// $http.get('/getTag/' + paths[paths.length - 1]).success(function(data) {\n\t\t// \tif (data) {\n\t\t// \t\t// console.log(data);\n\t\t// \t\t$scope.data = data;\n\t\t// \t};\n\t\t// })\n\n\t\t$scope.startEdit = false;\n\n\t\t$scope.isActive = false;\n\n\t\t$scope.editText = \"edit\";\n\n\t\t$scope.saveText = \"save\";\n\n\t\t$scope.isSaved = false;\n\n\t\t$scope.enableEdit = function() {\n\t\t\tif (!$scope.startEdit) {\n\t\t\t\t$scope.isActive = true;\n\t\t\t\t$scope.startEdit = true;\n\t\t\t\t$scope.editText = \"editing\";\n\t\t\t\tvar editor = new Minislate.simpleEditor(document.getElementById('tag-intro'));\n\t\t\t};\n\t\t};\n\n\t\t$scope.save = function() {\n\t\t\tif (document.getElementById('tag-name').innerHTML.trim() == \"new\") {\n\t\t\t\talert(\"Please change the tag name before save;\")\n\t\t\t\treturn null;\n\t\t\t};\n\n\t\t\t$scope.isSaved = true;\n\n\t\t\tvar tagInfo = {\n\t\t\t\ttag: $scope.data.isNew ? document.getElementById('tag-name').innerHTML : $scope.data.tag,\n\t\t\t\tabstract: document.getElementById('tag-abstract').innerHTML,\n\t\t\t\tintro: document.getElementById('tag-intro').innerHTML,\n\t\t\t};\n\n\t\t\t// to be removed\n\t\t\tvar url = window.location.href,\n\t\t\t\tnowPath = url.split(\"/\"),\n\t\t\t\tnewUrl = url.replace(nowPath[nowPath.length - 1], tagInfo.tag);\n\t\t\thistory.pushState('', tagInfo.tag, newUrl);\n\t\t\tvar d = new Date();\n\t\t\t$scope.saveText = \"saved at \" + d.getHours() + \":\" + (d.getMinutes() < 10 ? '0' : \"\") + d.getMinutes();\n\n\t\t\t// replaced with\n\t\t\t// $http({\n\t\t\t// \t\tmethod: 'POST',\n\t\t\t// \t\turl: '/saveTag',\n\t\t\t// \t\tdata: $.param(tagInfo),\n\t\t\t// \t\theaders: {\n\t\t\t// \t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t// \t\t},\n\t\t\t// \t\txhrFields: {\n\t\t\t// \t\t\twithCredentials: true\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// \t.success(function(data) {\n\t\t\t// \t\tif (!data.success) {\n\t\t\t// \t\t\t$scope.saveText = \"not saved\";\n\t\t\t// \t\t} else {\n\t\t\t// \t\t\t//dynamic change the title\n\t\t\t// \t\t\tvar url = window.location.href,\n\t\t\t// \t\t\t\tnowPath = url.split(\"/\"),\n\t\t\t// \t\t\t\tnewUrl = url.replace(nowPath[nowPath.length - 1], tagInfo.tag);\n\t\t\t// \t\t\thistory.pushState('', tagInfo.tag, newUrl);\n\t\t\t// \t\t\tvar d = new Date();\n\t\t\t// \t\t\t$scope.saveText = \"saved at \" + d.getHours() + \":\" + (d.getMinutes() < 10 ? '0' : \"\") + d.getMinutes();\n\t\t\t// \t\t}\n\t\t\t// \t});\n\n\t\t}\n\n\t}])\n\n\t.filter('unsafe', function($sce) {\n\t\treturn $sce.trustAsHtml;\n\t});\n\n})()"],"sourceRoot":"/source/"}